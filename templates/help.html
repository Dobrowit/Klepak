<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instrukcja API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1, h2 {
            color: #333;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
        .endpoint {
            margin-bottom: 20px;
        }
        .example {
            background-color: #f9f9f9;
            border-left: 4px solid #ccc;
            padding: 10px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>Instrukcja API</h1>
    <p>Witamy w instrukcji do API aplikacji Klepak. Poniżej znajdziesz szczegółowe informacje o dostępnych endpointach oraz przykładach użycia.</p>

    <div class="endpoint">
        <h2>1. Status serwera</h2>
        <p><strong>Endpoint:</strong> <code>/status</code></p>
        <p><strong>Metoda:</strong> GET</p>
        <p>Ten endpoint zwraca informacje o stanie serwera, takie jak liczba wpisów, liczba zdjęć, rozmiar pliku danych, rozmiar plików zdjęć, liczba zablokowanych adresów IP (poza pulą PL i nieznane), licznik wejść oraz czas działania serwera (uptime).</p>
        <div class="example">
            <strong>Przykład odpowiedzi:</strong>
            <pre>{
    "num_entries": 10,
    "num_images": 5,
    "data_file_size": 0.1,
    "images_files_size": 4.5,
    "total_size_mb": 4.6,
    "ip_blocks": 3,
    "ip_blocks_unknown": 1,
    "entry_counter": 122,
    "uptime": "1h 23m 45s"
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <h2>2. Wczytywanie danych</h2>
        <p><strong>Endpoint:</strong> <code>/upload</code></p>
        <p><strong>Metoda:</strong> POST</p>
        <p>Ten endpoint umożliwia przesyłanie danych wraz ze zdjęciem. Wymagane pola to: <code>data</code>, <code>opis</code>, <code>zdjecie</code> (w formacie base64), <code>latitude</code>, <code>longitude</code>. Jeśli nie podano ID, zostanie wygenerowane nowe.</p>
        <div class="example">
            <strong>Przykład zapytania:</strong>
            <pre>{
    "data": "2024-08-11 00:00:00",
    "opis": "Przykładowy opis",
    "zdjecie": "base64string",
    "latitude": "54.7578",
    "longitude": "17.5610"
}</pre>
            <strong>Przykład odpowiedzi:</strong>
            <pre>{
    "message": "Dane zapisane pomyślnie",
    "id": "d290f1ee-6c54-4b01-90e6-d701748f0851"
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <h2>3. Pobieranie zapisanych danych</h2>
        <p><strong>Endpoint:</strong> <code>/data</code></p>
        <p><strong>Metoda:</strong> GET</p>
        <p>Ten endpoint zwraca zapisane dane. Można opcjonalnie przekazać parametr <code>id</code>, aby otrzymać dane dla wpisów danego usera.</p>
        <div class="example">
            <strong>Przykład zapytania:</strong> <code>/data?id=d290f1ee-6c54-4b01-90e6-d701748f0851</code>
            <br><strong>Przykład odpowiedzi:</strong>
            <pre>[
    {
        "data": "2024-08-11 00:00:00",
        "opis": "Przykładowy opis",
        "zdjecie": "data/2024-08-11 00-00-00.jpg",
        "latitude": "54.7578",
        "longitude": "17.5610"
    }
]</pre>
        </div>
    </div>

    <div class="endpoint">
        <h2>4. Wizualizacja danych na mapie</h2>
        <p><strong>Endpoint:</strong> <code>/map</code></p>
        <p><strong>Metoda:</strong> GET</p>
        <p>Ten endpoint generuje mapę z zaznaczonymi punktami na podstawie zapisanych danych. Można opcjonalnie przekazać parametr <code>id</code>, aby wyświetlić dane dla konkretnego wpisu.</p>
        <div class="example">
            <strong>Przykład użycia:</strong> <code>/map?id=d290f1ee-6c54-4b01-90e6-d701748f0851</code>
        </div>
    </div>

    <div class="endpoint">
        <h2>5. Podgląd danych w tabeli</h2>
        <p><strong>Endpoint:</strong> <code>/table</code></p>
        <p><strong>Metoda:</strong> GET</p>
        <p>Ten endpoint wyświetla zapisane dane w formie tabeli HTML.</p>
        <div class="example">
            <strong>Przykład odpowiedzi:</strong> HTML tabela z danymi.
        </div>
    </div>

    <div class="endpoint">
        <h2>6. Pomoc i opis do API</h2>
        <p><strong>Endpoint:</strong> <code>/help</code></p>
        <p><strong>Metoda:</strong> GET</p>
        <p>Ten endpoint wyświetla niniejszą instrukcję obsługi API.</p>
    </div>

</body>
</html>
